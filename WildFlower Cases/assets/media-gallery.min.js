customElements.get("media-gallery")||customElements.define("media-gallery",class extends HTMLElement{constructor(){super();this.elements={liveRegion:this.querySelector('[id^="GalleryStatus"]'),viewer:this.querySelector('[id^="GalleryViewer"]'),thumbnails:this.querySelector('[id^="GalleryThumbnails"]')};this.mql=window.matchMedia("(min-width: 750px)");this.elements.thumbnails&&(this.elements.viewer.addEventListener("slideChanged",debounce(this.onSlideChanged.bind(this),500)),this.elements.thumbnails.querySelectorAll("[data-target]").forEach(a=>
{a.querySelector("button").addEventListener("click",this.setActiveMedia.bind(this,a.dataset.target,!1))}),"stacked"!==this.dataset.desktopLayout&&this.mql.matches&&this.removeListSemantic())}onSlideChanged(a){a=this.elements.thumbnails.querySelector(`[data-target="${a.detail.currentElement.dataset.mediaId}"]`);this.setActiveThumbnail(a)}setActiveMedia(a,b){const c=this.elements.viewer.querySelector(`[data-media-id="${a}"]`);this.elements.viewer.querySelectorAll("[data-media-id]").forEach(d=>{d.classList.remove("is-active")});
c.classList.add("is-active");b&&(c.parentElement.prepend(c),this.elements.thumbnails&&(b=this.elements.thumbnails.querySelector(`[data-target="${a}"]`),b.parentElement.prepend(b)),this.elements.viewer.slider&&this.elements.viewer.resetPages());this.preventStickyHeader();window.setTimeout(()=>{this.elements.thumbnails&&c.parentElement.scrollTo({left:c.offsetLeft});this.elements.thumbnails&&"stacked"!==this.dataset.desktopLayout||c.scrollIntoView({behavior:"smooth"})});this.playActiveMedia(c);this.elements.thumbnails&&
(a=this.elements.thumbnails.querySelector(`[data-target="${a}"]`),this.setActiveThumbnail(a),this.announceLiveRegion(c,a.dataset.mediaPosition))}setActiveThumbnail(a){this.elements.thumbnails&&a&&(this.elements.thumbnails.querySelectorAll("button").forEach(b=>b.removeAttribute("aria-current")),a.querySelector("button").setAttribute("aria-current",!0),this.elements.thumbnails.isSlideVisible(a,10)||this.elements.thumbnails.slider.scrollTo({left:a.offsetLeft}))}announceLiveRegion(a,b){if(a=a.querySelector(".product__modal-opener--image img"))a.onload=
()=>{this.elements.liveRegion.setAttribute("aria-hidden",!1);this.elements.liveRegion.innerHTML=window.accessibilityStrings.imageAvailable.replace("[index]",b);setTimeout(()=>{this.elements.liveRegion.setAttribute("aria-hidden",!0)},2E3)},a.src=a.src}playActiveMedia(a){window.pauseAllMedia();(a=a.querySelector(".deferred-media"))&&a.loadContent(!1)}preventStickyHeader(){(this.stickyHeader=this.stickyHeader||document.querySelector("sticky-header"))&&this.stickyHeader.dispatchEvent(new Event("preventHeaderReveal"))}removeListSemantic(){this.elements.viewer.slider&&
(this.elements.viewer.slider.setAttribute("role","presentation"),this.elements.viewer.sliderItems.forEach(a=>a.setAttribute("role","presentation")))}});
