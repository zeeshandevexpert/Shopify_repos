{%- comment -%}Please do not edit this file. Any modification can be lost as it is automatically updated by Debutify{%- endcomment -%}
{%- if settings.dbtfy_quick_view -%}

{%- if type == "container" -%}
  <div id="QuickViewContainer" class="dbtfy dbtfy-quick_view {% if settings.dbtfy_quick_view_hide_mobile %}small--hide{% endif %}"></div>
{%- else -%}
  <div class="dbtfy dbtfy-quick_view">
    <div class="tag-wrapper tag-{{ settings.icon_placement }} {% if settings.dbtfy_quick_view_hide_mobile %}small--hide{% endif %}">
      <button class="qv-icon btn btn-outline-primary btn-square-small" data-section-id="{{ section.id }}" data-product-id="{{ product.id }}">
        <span class="fas fa-{{ settings.quick_view_icon }}"></span>
      </button>
    </div>

    {%- assign current_variant = product.selected_or_first_available_variant -%}
    {%- assign featured_image = current_variant.featured_image | default: product.featured_image -%}
    {%- assign enable_zoom = false -%}
    {%- assign product_image_zoom_size = "1024x1024" -%}
    {%- assign product_image_scale = "2" -%}

    <div class="qv-wrapper">
      <div id="QuickView-{{ section.id }}-{{ product.id }}" class="qv-modal" data-upsell-target-id="{{ product.id }}">
        <div class="qv-modal-dialog">
          <div class="qv-modal-content animated {{ settings.quick_view_animation }}">

            <div class="qv-header">
              <a href="{{ product.url }}?variant={{ current_variant.id }}" class="qv-title h4">{{ product.title}}</a>
              <button type="button" class="qv-close-button btn btn-square-small icon-fallback-text">
                <span class="fas fa-times"></span>
              </button>
            </div>

            <div class="qv-modal-body wrapper-fluid">
              <div class="qv-grid grid">
                <div class="qv-photos grid__item medium--six-twelfths large--six-twelfths layout-thumbnail">
                  <div class="qv-slick product-single__photos slick-format slick-format-sm product-thumbnail__photos">

                    <div class="qv-image-{{featured_image.id}} product-single__photo--flex-wrapper">
                      <div class="product-single__photo--flex">
                        <div class="product-single__photo--container">
                          <div class="product-single__photo-wrapper image-wrapper"
                               style="padding-top:{{ 1 | divided_by: featured_image.aspect_ratio | times: 100}}%;">
                            {% assign img_url = featured_image | img_url: "1x1" | replace: "_1x1.", "_{width}x." %}
                            <img class="product-single__photo image lazyload {{ img_id_class }}"
                                 src="{{ featured_image | img_url: '300x' }}"
                                 data-src="{{ img_url }}"
                                 data-widths="[180, 360, 590, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                                 data-aspectratio="{{ featured_image.aspect_ratio }}"
                                 data-sizes="auto"
                                 alt="{{ featured_image.alt | escape }}">
                            <noscript>
                              <img class="product-single__photo"
                                   src="{{ featured_image | img_url: 'master' }}"
                                   alt="{{ featured_image.alt | escape }}">
                            </noscript>
                          </div>

                        </div>
                      </div>
                    </div>

                    {% for image in product.images %}
                      {% unless image contains featured_image %}
                      <div class="qv-image-{{image.id}} product-single__photo--flex-wrapper not-featured-image">
                        <div class="product-single__photo--flex">
                          <div class="product-single__photo--container">
                            <div class="product-single__photo-wrapper image-wrapper"
                                 style="padding-top:{{ 1 | divided_by: image.aspect_ratio | times: 100}}%;">
                              {% assign img_url = image | img_url: "1x1" | replace: "_1x1.", "_{width}x." %}
                              <img class="product-single__photo image lazyload"
                                   src="{{ image | img_url: '300x' }}"
                                   data-src="{{ img_url }}"
                                   data-widths="[180, 360, 540, 720, 900, 1080, 1296, 1512, 1728, 2048]"
                                   data-aspectratio="{{ image.aspect_ratio }}"
                                   data-sizes="auto"
                                   alt="{{ image.alt | escape }}">
                              <noscript>
                                <img class="product-single__photo" src="{{ image.src | img_url: 'master' }}"
                                     alt="{{ image.alt | escape }}">
                              </noscript>
                            </div>
                          </div>
                        </div>
                      </div>
                      {% endunless %}
                    {% endfor %}
                  </div>

                  {% if product.images.size > 1 %}
                  <div class="product-single__thumbnails slick-format slick-format-sm grid grid--small {% if product.images.size < 6  %}slick-disabled{% endif %}" id="ProductThumbs">
                    <div class="grid__item one-fifth">
                      <a class="product-single__thumbnail">
                        <img class="product-single__thumb" src="{{ featured_image.src | img_url: '150x150', crop: 'center' }}" alt="{{ featured_image.alt | escape }}">
                      </a>
                    </div>
                    {% for image in product.images %}
                    {% unless image contains featured_image %}
                    <div class="grid__item one-fifth">
                      <a class="product-single__thumbnail">
                        <img class="product-single__thumb" src="{{ image.src | img_url: '150x150', crop: 'center' }}" alt="{{ image.alt | escape }}">
                      </a>
                    </div>
                    {% endunless %}
                    {% endfor %}
                  </div>
                  {% endif %}
                </div>

                <div class="qv-details grid__item medium--six-twelfths large--six-twelfths {{variantStatus}}">
                  <div class="qv-price-wrapper price-wrapper">
                    <span class="qv-price-compare price-compare" {% unless current_variant.compare_at_price > current_variant.price %}style="display:none;"{% endunless %}>{{ current_variant.compare_at_price | money }}</span>
                    <span class="qv-price{% if current_variant.compare_at_price > current_variant.price %} on-sale{% endif %}">{{ current_variant.price | money }}</span>
                  </div>

                  {% if settings.grid_product_vendor %}
                  <p class="qv-vendor vendor">{{ product.vendor }}</p>
                  {% endif %}

                  {% include "review-badge", badge_template: "grid" %}

                  {% unless product.description == blank %}
                  <div class="qv-description rte">
                    {% assign desc = product.description | strip_html %}
                    {{ desc | truncatewords: 22 }}
                    <a href="{{ product.url }}?variant={{ current_variant.id }}" class="text-link continue-link">
                      {{ "products.product.full_details" | t }} <span class="fas fa-arrow-right"></span>
                    </a>
                  </div>
                  {% endunless %}

                  {% capture "form_classes" %}add-to-cart__form qv-form product-single__form{% endcapture %}
                  {% capture "form_id" %}QuickViewForm-{{ product.id }}{% endcapture %}

                  {% form "product", product, class:form_classes, id:form_id %}
                    {% unless product.has_only_default_variant %}
                    <div class="qv-variant-wrapper variant-wrapper grid grid-uniform grid--small">
                      {% for option in product.options_with_values %}
                      <div class="grid__item qv-variant-item radio-wrapper product-form__item">
                        <label class="qv-select-label single-option-radio__label" for="QuickViewSelect-{{ forloop.index0 }}-{{ product.id }}">{{ option.name | escape }}</label>
                        <select class="qv-select select--small full" id="QuickViewSelect-{{ forloop.index0 }}-{{ product.id }}" data-index="option{{ forloop.index }}">
                          {% for value in option.values %}
                          <option value="{{ value | escape }}"{% if option.selected_value == value %} selected="selected"{% endif %}>{{ value | escape }}</option>
                          {% endfor %}
                        </select>
                      </div>
                      {% endfor %}
                    </div>
                    {% endunless %}

                    <select name="id" class="qv-master-select" style="display:none;">
                      {% for variant in product.variants %}
                        {% if variant.available %}
                        <option {% if variant == product.selected_or_first_available_variant %}
                                selected="selected"
                                {% endif %}
                                data-sku="{{ variant.sku }}"
                                value="{{ variant.id }}"
                                data-variant="{{ variant.title | replace: ' / ', '' }}"
                                data-price="{{ variant.price | money }}"
                                {% if variant.compare_at_price > variant.price %}
                                data-price-compare="{{ variant.compare_at_price | money }}"
                                {% endif %}
                                data-image-id="{{ variant.image.id }}">
                          {{ variant.title }} - {{ variant.price | money_with_currency }}
                        </option>
                        {% else %}
                        <option disabled="disabled"
                                data-variant="{{ variant.title | replace: ' / ', '' }}"
                                data-price="{{ variant.price | money }}"
                                {% if variant.compare_at_price > variant.price %}
                                data-price-compare="{{ variant.compare_at_price | money }}"
                                {% endif %}
                                data-image-id="{{ variant.image.id }}">
                          {{ variant.title }} - {{ "products.product.sold_out" | t }}
                        </option>
                        {% endif %}
                      {% endfor %}
                    </select>

                    {% if settings.dbtfy_quick_view_quantity_selector %}
                    <div class="qv-quantity-wrapper">
                      <label for="QuickViewQuantity" class="qv-quantity-label">{{ "products.product.quantity" | t }}</label>
                      <div class="qv-qty-container">
                        <button class="btn btn-square-small qv-qty-adjust qv-qty-minus icon-fallback-text" type="button" aria-label="{{ 'cart.general.reduce_quantity' | t }}">
                          <span class="fas fa-minus" aria-hidden="true"></span>
                          <span class="fallback-text" aria-hidden="true">&minus;</span>
                        </button>
                        <input type="number" class="qv-qty-input" name="quantity" id="QuickViewQuantity" value="1" min="1" hidden="hidden">
                        <button class="btn btn-square-small qv-qty-adjust qv-qty-plus icon-fallback-text" type="button" aria-label="{{ 'cart.general.increase_quantity' | t }}">
                          <span class="fas fa-plus" aria-hidden="true"></span>
                          <span class="fallback-text" aria-hidden="true">+</span>
                        </button>
                      </div>
                    </div>
                    {% endif %}

                    <button type="submit" name="add"
                            class="btn--add-to-cart qv-addtocart-button btn btn--buy btn--full add-to-cart"
                            {% unless current_variant.available %} disabled="disabled"{% endunless %}>
                      <span class="btn__text">
                        <span class="fas fa-shopping-{{ settings.cart_icon }}"></span>
                        <span class="btn__add-to-cart-text">
                          {% if current_variant.available %}
                          {{ "products.product.add_to_cart" | t }}
                          {% else %}
                          {{ "products.product.sold_out" | t }}
                          {% endif %}
                        </span>
                      </span>
                    </button>
                  {% endform %}
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
      <div class="qv-overlay"></div>
    </div>

  </div>
{%- endif -%}
{%- endif -%}