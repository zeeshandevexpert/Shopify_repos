{%- comment -%}Please do not edit this file. Any modification can be lost as it is automatically updated by Debutify{%- endcomment -%}
{%- if settings.dbtfy_sales_countdown -%}

  <!--on sale -->
  {% assign on_sale = false %}

  {% if current_variant.compare_at_price > current_variant.price %}
    {% assign on_sale = true %}
  {% endif %}

  <!-- type -->
  {% if settings.dbtfy_sales_countdown_type != blank %}
    {% assign type_list = settings.dbtfy_sales_countdown_type | split: "," %}
    {% for type in type_list %}
      {% if product.type contains type %}
        {% assign valid_sale = true %}
      {% endif %}
    {% endfor %}
  {% endif %}

  <!-- tag -->
  {% if settings.dbtfy_sales_countdown_tag != blank %}
    {% assign tag_list = settings.dbtfy_sales_countdown_tag | split: "," %}
    {% for tag in tag_list %}
      {% if product.tags contains tag %}
        {% assign valid_sale = true %}
      {% endif %}
    {% endfor %}
  {% endif %}

  <!-- product -->
  {% assign product_filter = all_products[settings.dbtfy_sales_countdown_product] %}
  {% if product_filter != blank %}
    {% if product.handle == product_filter.handle %}
      {% assign valid_sale = true %}
    {% endif %}
  {% endif %}

  <!-- collection -->
  {% if settings.dbtfy_sales_countdown_collection != blank %}
    {% for collection in product.collections %}
      {% if collection.handle == settings.dbtfy_sales_countdown_collection %}
        {% assign valid_sale = true %}
        {% break %}
      {% endif %}
    {% endfor %}
  {% endif %}

  {% if settings.dbtfy_sales_countdown_product == blank and settings.dbtfy_sales_countdown_type == blank and settings.dbtfy_sales_countdown_tag == blank and settings.dbtfy_sales_countdown_collection == blank %}
    {% assign valid_sale = true %}
  {% endif %}

  {% if valid_sale and on_sale %}
    <div class="dbtfy dbtfy-sales_countdown"
         data-date="{{settings.dbtfy_sales_countdown_date}}"
         data-hours="{{settings.dbtfy_sales_countdown_time_hours}}"
         data-minutes="{{settings.dbtfy_sales_countdown_time_mins}}">
      <div id="SalesCountdown" class="SalesCountdown {% if settings.dbtfy_sales_countdown_bg %}background-sales_countdown{% endif %}">
        {% unless settings.dbtfy_sales_countdown_icon == "" %}
        <span class="fas fa-{{ settings.dbtfy_sales_countdown_icon }} fa-fw"></span>
        {% endunless %}
        <span class="prefix-sales_countdown">{{ settings.dbtfy_sales_countdown_prefix }}</span>
        <strong class="timer-sales_countdown">
          <span class="days-sales_countdown"></span>
          <span class="hours-sales_countdown"></span>
          <span class="minutes-sales_countdown"></span>
          <span class="seconds-sales_countdown"></span>
        </strong>
        <span class="suffix-sales_countdown">{{ settings.dbtfy_sales_countdown_suffix }}</span>
      </div>
    </div>
  {% endif %}

{%- endif -%}