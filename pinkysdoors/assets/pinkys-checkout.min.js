(function(a){a.fn.donetyping=function(b){function c(){clearTimeout(e);b.call(d)}var d=a(this),e;d.keyup(function(){clearTimeout(e);e=setTimeout(c,250)})}})(jQuery);
var wick={init:function(){Shopify.Checkout.isOrderStatusPage?console.log(Shopify.Checkout):("payment_method"==Shopify.Checkout.step&&(console.log("payment_method"),wick.addNoAmex()),$.getJSON("/cart.json",function(a){window.checkout.attributes=a.attributes;console.log(window.checkout.attributes);wick.addPoInput();wick.addTerms();wick.backToInfoButton()}),this.addCurbsideDeliveryText())},addNoAmex:function(){var a=window.checkout.noAmex;$(".section--payment-method .section__header").append(`<p style="color:#ff5c4e;"><b>${a}</b></p>`)},
getUrlParameter:function(a){a=a.replace(/[\[]/,"\\[").replace(/[\]]/,"\\]");a=(new RegExp("[\\?&]"+a+"=([^&#]*)")).exec(location.search);return null===a?"":decodeURIComponent(a[1].replace(/\+/g," "))},addTerms:function(){$("#terms-text").insertBefore(".step__footer")},checkPromoApplied:function(){var a=Cookies.get("promo-applied"),b=Cookies.get("promo-code"),c=$(".reduction-code");$('button[data-trekkie-id="apply_discount_button"]');$("#checkout_reduction_code");"true"!=a&&0==c.length&&void 0!=b&&
(a="https://"+window.location.hostname+"/discount/"+b,console.log(a),$.get(a,function(d){console.log("applying-promo...");Cookies.set("promo-applied","true");location.reload()}).fail(function(d){console.log(d)}))},addLocalDeliveryText:function(){var a=$('.radio__label__primary[data-shipping-method-label-title="Local Delivery"]'),b=$(".local-delivery__text").text();a.length&&a.append($("<small>"+b+"</small>"))},addCurbsideDeliveryText:function(){var a=$('.radio__label__primary[data-shipping-method-label-title="Standard Freight"]');
a.length&&a.append($("<small>(All Shipments are Curbside Delivery)</small>"))},backToInfoButton:function(){previouslink=$(".step__footer__previous-link").attr("href");if($(".step__footer__previous-link").length&&(isPreviousLinkContactInfo=-1<previouslink.indexOf("contact_information")))if("shipping_method"==Shopify.Checkout.step){var a="<br><small>*Go back to select In-Store Pickup</small>";$(".step__footer__previous-link-content").append(a).parent().addClass("info_msg_checkoutbtn")}else"payment_method"==
Shopify.Checkout.step&&(a="<br><small>*Go back to select Shipping/Delivery</small>",$(".step__footer__previous-link-content").append(a).parent().addClass("info_msg_checkoutbtn"))},addPoInput:function(){var a="",b="";checkout.attributes["PO Number"]&&(a=checkout.attributes["PO Number"],b="field__label--visible");0===$(".po-input__wrapper").length&&(console.log("no PO yet"),$(`<div class="po-input__wrapper">
        <div class="field__input-wrapper relative">
        	<label class="field__label ${b}" for="po-input">PO Number</label>
        	<input id="po-input" type="text" name="po-input" class="po-input field__input" placeholder="PO Number (optional)" value="${a}">
			<button class="po-submit btn btn--primary field__input-btn" aria-busy="false">
				<span class="btn__content">Update</span>
				<svg class="icon-svg icon-svg--size-18 btn__spinner icon-svg--spinner-button" aria-hidden="true" focusable="false"> <use xlink:href="#spinner-button"></use> </svg>
			</button>
        </div>
        </div>`).insertBefore(".step__footer"),$(`<tr class="total-line total-line__po">
							<th class="total-line__name">PO Number</th>
							<td class="total-line__price"><span class="order-summary__emphasis total__po-value">${a}</span></td>
						</tr>`).appendTo(".total-line-table__tbody"));wick.checkPoVal();wick.checkNeedsUpdate();$(document).on("click",".po-submit",function(){$(this).addClass("btn--loading");$("#continue_button").addClass("btn--disabled").prop("disabled",!0);wick.updatePoValue($(".po-input").val());return!1});$("#po-input").donetyping(function(){wick.poLabels();wick.checkNeedsUpdate()});Shopify.Checkout.isOrderStatusPage&&$(".po-input__wrapper").hide()},poLabels:function(){var a=$("#po-input"),b=a.closest(".po-input__wrapper");
""!=a.val()?b.addClass("field--show-floating-label"):b.removeClass("field--show-floating-label")},checkNeedsUpdate:function(a){var b=$("#po-input"),c=$(".po-submit");checkout.attributes["PO Number"]==b.val()||a?c.addClass("btn--disabled").prop("disabled",!0):c.removeClass("btn--disabled").prop("disabled",!1)},checkPoVal:function(){""!=$("#po-input").val()?$(".total-line__po").show():$(".total-line__po").hide()},updatePoValue:function(a){$("#continue_button");$.ajax({type:"POST",url:"/cart/update.js",
data:{attributes:{"PO Number":a}},async:!1,dataType:"json",success:function(b){console.log(b);location.reload()},error:function(b,c){Shopify.api.onError(b,c)}});return!1}};$(document).on("page:load page:change",function(){wick.init()});$(function(){});
